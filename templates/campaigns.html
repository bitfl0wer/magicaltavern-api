{% extends 'base.html' %}
{% block content %}

<h1 style="padding-bottom: 5px;">Campaigns</h1>
{% with messages = get_flashed_messages() %}
{% if messages %}
<div class="notification">
  {{ messages[0] }}. 
</div>
{% endif %}
{% endwith %}

    {% for campaign in campaigns %}
        <div class='campaign'>
    
            <table class="table">
              <thead class='tablehead'>
                <tr>
                    <th style ="width : 15%"><h2>{{ campaign['name'] }}</h2></th>
                </tr>
                </thead>
              <tbody>
                <tr>
                <th scope="row">Dungeonmaster: </th>
                  <td>{{ campaign['dungeon_master'] }}</td>
                </tr>
                <tr>
                  <th scope="row">Beschreibung: </th>
                  <td>{{ campaign['description'] }}</td>
                </tr>
                <tr>
                  <th scope="row">Players Min: </th>
                  <td>{{ campaign['players_min'] }}</td>
                </tr>
                <tr>
                  <th scope="row">Players: </th>
                  <td> {{ campaign['players_current'] }}/{{ campaign['players_max'] }} </td>
                </tr>
                <tr>
                  <th scope="row">Complexity: </th>
                  <td>{{ campaign['complexity'] }}</td>
                </tr>
                <tr>
                  <th scope="row">Place: </th>
                  <td>{{ campaign['place'] }}</td>
                </tr>
                <tr>
                  <th scope="row">Time: </th>
                  <td>{{ campaign['time'] }}</td>
                </tr>
                <tr>
                  <th scope="row">Content Warnings: </th>
                  <td>{{ campaign['content_warnings'] }}</td>
                </tr>
                <tr>
                  <th scope="row">Ruleset: </th>
                  <td>{{ campaign['ruleset'] }}</td>
                </tr>
                <tr>
                  <th scope="row">Campaign Length: </th>
                  <td>{{ campaign['campaign_length'] }}</td>
                </tr>
                <tr>
                  <th scope="row">Language: </th>
                  <td>{{ campaign['language'] }}</td>
                </tr>
                <tr>
                  <th scope="row">Character Creation: </th>
                  <td>{{ campaign['character_creation'] }}</td>
                </tr>
                <tr>
                  <th scope="row">Briefing: </th>
                  <td>{{ campaign['briefing'] }}</td>
                </tr>
                <tr>
                  <th scope="row">Notes: </th>
                  <td>{{ campaign['notes'] }}</td>
                </tr>
                <tr>
                  <th scope="row">Key </th>
                  <td>{{ campaign['key'] }}</td>
                </tr>
                <tr>
                  {% if current_user.is_authenticated %}
                  <form action="/signUpCampaign/{{ campaign['key'] }}" method="post">
                    <td>
                      <button type="submit">Sign up for this campaign</button>
                  </td>
                </form>
                  {% endif %}
                  {% if not current_user.is_authenticated %}
                  <form action="/signUpCampaignEmail/{{ campaign['key'] }}" method="post">
                    <td>
                      <button type="submit">Sign up for this campaign</button>
                  </td>
                  <td>
                    <label for="email">Enter your Email</label>
                    <br>
                    <input name="email" type="email" id="email" size="30" required placeholder="yourEmail@something.com">
                  </td>
                  {% endif %}  
                  </form>    
                  </td>
                </tr>
              </tbody>
            </table>
        </div>
    {% endfor %}
{% endblock %}